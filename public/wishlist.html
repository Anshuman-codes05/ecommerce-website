<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wishlist - nvrmnd</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">nvrmnd</div>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li class="dropdown">
                    <a href="#" class="dropbtn">Products</a>
                    <div class="dropdown-content">
                        <a href="products.html?category=men">Men's</a>
                        <a href="products.html?category=women">Women's</a>
                    </div>
                </li>
                <li><a href="about.html">About</a></li>
            </ul>
            <div class="nav-icons">
                <a href="search.html" class="icon-link" title="Search">üîç</a>
                <a href="wishlist.html" class="icon-link" title="Wishlist">‚ù§Ô∏è</a>
                <a href="cart.html" class="icon-link cart-link" title="Cart">
                    üõí<span class="cart-count" style="display: none;">0</span>
                </a>
            </div>
        </nav>
    </header>

    <main>
        <section class="wishlist-section">
            <div class="wishlist-container">
                <div class="wishlist-header">
                    <h1>My Wishlist</h1>
                    <div class="wishlist-stats">
                        <span id="wishlist-count">0 items</span>
                    </div>
                </div>

                <div id="wishlist-empty" class="wishlist-empty" style="display: none;">
                    <div class="empty-wishlist-icon">‚ù§Ô∏è</div>
                    <h2>Your wishlist is empty</h2>
                    <p>Save items you love for later</p>
                    <a href="products.html" class="btn primary-btn">Start Shopping</a>
                </div>

                <div id="wishlist-content" class="wishlist-content">
                    <div class="wishlist-grid" id="wishlist-items">
                        <!-- Wishlist items will be loaded dynamically -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 NVRMND by Anshuman. All rights reserved.</p>
    </footer>

    <script src="js/script.js"></script>
    <script>
        // Wishlist functionality
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

        function saveWishlist() {
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
        }

        function addToWishlist(productId) {
            const product = [...sampleMenProducts, ...sampleWomenProducts].find(p => p._id === productId || p.id === productId);
            if (product) {
                const existingItem = wishlist.find(item => item._id === productId || item.id === productId);
                if (!existingItem) {
                    wishlist.push(product);
                    saveWishlist();
                    updateWishlistCount();
                    showNotification(`${product.name} added to wishlist!`, 'success');
                } else {
                    showNotification(`${product.name} is already in your wishlist`, 'info');
                }
            }
        }

        function removeFromWishlist(productId) {
            const productIndex = wishlist.findIndex(item => item._id === productId || item.id === productId);
            if (productIndex > -1) {
                const removedItem = wishlist.splice(productIndex, 1)[0];
                saveWishlist();
                displayWishlist();
                updateWishlistCount();
                showNotification(`${removedItem.name} removed from wishlist`, 'info');
            }
        }

        function updateWishlistCount() {
            const wishlistCountElements = document.querySelectorAll('.wishlist-count');
            wishlistCountElements.forEach(element => {
                element.textContent = wishlist.length;
                element.style.display = wishlist.length > 0 ? 'inline-block' : 'none';
            });
        }

        function displayWishlist() {
            const wishlistItems = document.getElementById('wishlist-items');
            const wishlistEmpty = document.getElementById('wishlist-empty');
            const wishlistContent = document.getElementById('wishlist-content');
            const wishlistCount = document.getElementById('wishlist-count');

            if (wishlistItems && wishlistCount) {
                if (wishlist.length === 0) {
                    wishlistEmpty.style.display = 'block';
                    wishlistContent.style.display = 'none';
                    return;
                }

                wishlistEmpty.style.display = 'none';
                wishlistContent.style.display = 'block';

                wishlistItems.innerHTML = '';
                wishlist.forEach(product => {
                    wishlistItems.innerHTML += `
                        <div class="wishlist-item">
                            <img src="${product.image}" alt="${product.name}">
                            <div class="wishlist-item-details">
                                <h3>${product.name}</h3>
                                <p class="product-description">${product.description}</p>
                                <p class="product-price">$${product.price}</p>
                                <div class="wishlist-actions">
                                    <button class="btn" onclick="addToCart('${product._id || product.id}')">Add to Cart</button>
                                    <button class="btn secondary-btn" onclick="removeFromWishlist('${product._id || product.id}')">Remove</button>
                                </div>
                            </div>
                        </div>
                    `;
                });

                // Update wishlist count
                wishlistCount.textContent = `${wishlist.length} item${wishlist.length !== 1 ? 's' : ''}`;
            }
        }

        // Initialize wishlist on page load
        document.addEventListener('DOMContentLoaded', function() {
            displayWishlist();
            updateWishlistCount();
        });

        // Make functions globally available
        window.addToWishlist = addToWishlist;
        window.removeFromWishlist = removeFromWishlist;
    </script>
</body>
</html>